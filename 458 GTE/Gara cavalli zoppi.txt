import java.util.Random;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        Random rand = new Random();

        System.out.print("Inserisci la lunghezza del percorso (in metri): ");
        int lunghezza = input.nextInt();

        // Creiamo 5 cavalli con nomi fissati
        Cavallo[] cavalli = {
            new Cavallo("Fulmine"),
            new Cavallo("Tempesta"),
            new Cavallo("Saetta"),
            new Cavallo("Ombra"),
            new Cavallo("Lampo")
        };

        boolean garaFinita = false;
        Cavallo vincitore = null;

        int passoAzzoppamento = rand.nextInt(5, 15); // tra 5 e 15 cicli
        boolean cavalloAzzoppato = false;
        int numeroCiclo = 0;

        // Ciclo di gara
        while (!garaFinita) {
            numeroCiclo++;

            // Se √® arrivato il momento, azzoppa un cavallo a caso
            if (!cavalloAzzoppato && numeroCiclo == passoAzzoppamento) {
                int indiceAzzoppato = rand.nextInt(cavalli.length);
                cavalli[indiceAzzoppato].azzoppa();
                System.out.println("‚ö†Ô∏è Il cavallo " + cavalli[indiceAzzoppato].getNome() + " si √® AZZOPPATO e si ferma!");
                cavalloAzzoppato = true;
            }

            for (Cavallo c : cavalli) {
                c.avanza();
                System.out.println(c.getNome() + " √® a " + c.getPosizione() + " metri.");

                // Controlla se ha finito e non √® azzoppato
                if (!c.isAzzoppato() && c.haFinito(lunghezza)) {
                    garaFinita = true;
                    vincitore = c;
                    break;
                }
            }

            System.out.println("------------------------------");
        }

        System.out.println("üèÜ Il vincitore √® " + vincitore.getNome() + "!");
        input.close();
    }
}
